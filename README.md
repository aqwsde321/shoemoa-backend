# Shoemoa Backend

ì‹ ë°œ ì‡¼í•‘ëª° ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ **Shoemoa**ì˜ ë°±ì—”ë“œ API ë ˆí¬ì§€í† ë¦¬ì…ë‹ˆë‹¤.  
Spring Bootë¥¼ ê¸°ë°˜ìœ¼ë¡œ RESTful APIë¥¼ ì œê³µí•˜ë©°, í”„ë¡ íŠ¸ì—”ë“œì™€ ì—°ë™ë©ë‹ˆë‹¤.

**ğŸ’¡ ì´ í”„ë¡œì íŠ¸ëŠ” JPA í•™ìŠµìš©ìœ¼ë¡œë„ í™œìš©ë©ë‹ˆë‹¤.**

---

## ğŸ“– API Docs

**Swagger API**  
ğŸ‘‰ (ì„œë²„ ì‹¤í–‰ í›„) http://localhost:8080/swagger-ui/index.html

---

## ğŸ›  Tech Stack

- **Framework**: Spring Boot 3.5.9, Spring Data JPA
- **Language**: Java 17
- **Database**: PostgreSQL, H2 (for testing)
- **Query**: QueryDSL
- **Storage**: AWS S3 (for Images)
- **CDN**: AWS CloudFront
- **Build**: Gradle
- **Code Style**: Spotless (Palantir Java Format)
- **API Docs**: SpringDoc (Swagger)

---

## ğŸ“¦ Project Overview

Shoemoa ë°±ì—”ë“œ ì‹œìŠ¤í…œì€ ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD) ì›ì¹™ì— ë”°ë¼ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ **Entity**ì— ì§‘ì¤‘ì‹œí‚¤ê³ , **Service**ëŠ” íŠ¸ëœì­ì…˜ê³¼ ë°ì´í„° íë¦„ì„ ê´€ë¦¬í•˜ëŠ” ì—­í• ë§Œ ìˆ˜í–‰í•˜ì—¬ ì‘ì§‘ë„ ë†’ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°ë¥¼ ì§€í–¥í•©ë‹ˆë‹¤.

### ì•„í‚¤í…ì²˜ ì›ì¹™
- **ë¡œì§ì€ Entityì—, íë¦„ì€ Serviceì—, ì•ˆì „í•¨ì€ Testë¡œ.**
- ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ê³¼ ìƒíƒœ ë³€ê²½ì€ Entity ë‚´ë¶€ ë©”ì„œë“œë¥¼ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
- ServiceëŠ” ì—¬ëŸ¬ Repositoryë¥¼ ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì—¬ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³ , Entityì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ íë¦„ì„ ì¡°í•©í•©ë‹ˆë‹¤.
- ControllerëŠ” HTTP ìš”ì²­ì„ ë°›ì•„ DTOë¥¼ ë³€í™˜í•˜ê³  Serviceë¥¼ í˜¸ì¶œí•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•©ë‹ˆë‹¤.

### ë„ë©”ì¸ êµ¬ì¡°
- **`product`**: ìƒí’ˆ, ì´ë¯¸ì§€, ì˜µì…˜ ë“± ìƒí’ˆ ê´€ë ¨ ë„ë©”ì¸
- **`order`**: ì£¼ë¬¸, ì£¼ë¬¸ ìƒí’ˆ ë“± ì£¼ë¬¸ ê´€ë ¨ ë„ë©”ì¸
- **`member`**: íšŒì› ê´€ë ¨ ë„ë©”ì¸
- **`common`**: ê³µí†µ ëª¨ë“ˆ (ì´ë¯¸ì§€ ì—…ë¡œë” ë“±)

---

## ğŸ—ºï¸ Development Roadmap

ì´ í”„ë¡œì íŠ¸ëŠ” v3 ì•„í‚¤í…ì²˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ ë‹¨ê³„ì— ë”°ë¼ ê¸°ëŠ¥ì„ í™•ì¥í•´ ë‚˜ê°€ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

### Phase 1: í•µì‹¬ ë„ë©”ì¸ êµ¬í˜„ (Product & Member)
- **[v] ìƒí’ˆ(Product) ë„ë©”ì¸**: ìƒí’ˆ ë“±ë¡, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ API êµ¬í˜„
- **[v] íšŒì›(Member) ë„ë©”ì¸**:
    -   `[v]` íšŒì›ê°€ì…, ë¡œê·¸ì¸ API êµ¬í˜„
    -   `[v]` Spring Securityì™€ JWTë¥¼ í™œìš©í•œ ì¸ì¦/ì¸ê°€ êµ¬í˜„

### Phase 2: ì£¼ë¬¸ ë° ê²°ì œ ê¸°ëŠ¥ (Order & Payment)
- **[ ] ì¥ë°”êµ¬ë‹ˆ(Cart) ê¸°ëŠ¥**:
    -   `[ ]` ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆ ì¶”ê°€, ì¡°íšŒ, ì‚­ì œ ê¸°ëŠ¥
- **[ ] ì£¼ë¬¸(Order) ë„ë©”ì¸**:
    -   `[ ]` ìƒí’ˆ ì£¼ë¬¸ API êµ¬í˜„
    -   `[ ]` ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ, ì£¼ë¬¸ ì·¨ì†Œ API êµ¬í˜„
- **[ ] ê²°ì œ(Payment) ì—°ë™**:
    -   `[ ]` PGì‚¬(ì˜ˆ: í† ìŠ¤í˜ì´ë¨¼ì¸ ) ì—°ë™ì„ í†µí•œ ê²°ì œ ìš”ì²­ ë° ì²˜ë¦¬

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ ë° ìµœì í™”
- **[ ] ê²€ìƒ‰ ê¸°ëŠ¥ ê³ ë„í™”**:
    -   `[ ]` QueryDSLì„ í™œìš©í•œ ë™ì  ê²€ìƒ‰ ì¡°ê±´ ë° ì •ë ¬ ê¸°ëŠ¥ í™•ì¥
- **[ ] ì„±ëŠ¥ ìµœì í™”**:
    -   `[ ]` Redisë¥¼ ì´ìš©í•œ ì¿¼ë¦¬ ê²°ê³¼ ìºì‹± (ì˜ˆ: ìƒí’ˆ ìƒì„¸ ì •ë³´)
- **[ ] ë™ì‹œì„± ì œì–´**:
    -   `[ ]` ì¬ê³  ì°¨ê° ë¡œì§ì— ëŒ€í•œ ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ë° Lock(Pessimistic/Optimistic) ì ìš© ê²€í† 

---

## âœ¨ Core Features

### ì‚¬ìš©ì ê¸°ëŠ¥
- ìƒí’ˆ ëª©ë¡ ì¡°íšŒ (ê²€ìƒ‰, í•„í„°ë§, í˜ì´ì§•)
- ìƒí’ˆ ìƒì„¸ ì •ë³´ ì¡°íšŒ

### ê´€ë¦¬ì ê¸°ëŠ¥
- ìƒí’ˆ ë“±ë¡ (ì´ë¯¸ì§€ í¬í•¨)
- ìƒí’ˆ ì •ë³´ ìˆ˜ì •
- ìƒí’ˆ ì˜µì…˜ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ
- ìƒí’ˆ ì‚­ì œ

> í”„ë¡ íŠ¸ì—”ë“œ UIì— ë§ì¶° íšŒì›, ì£¼ë¬¸, ì¥ë°”êµ¬ë‹ˆ ë“± í•µì‹¬ ë„ë©”ì¸ ê¸°ëŠ¥ì´ ë‹¨ê³„ì ìœ¼ë¡œ ì—°ë™ë  ì˜ˆì •ì…ë‹ˆë‹¤.

---

## ğŸš€ Getting Started

### Prerequisites
- Java 17
- (Optional) Docker

### Build
```bash
./gradlew build
```

### Run Application
**1. Using Gradle (local profile)**  
H2 ì¸ë©”ëª¨ë¦¬ DBë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ì—ì„œ ë¹ ë¥´ê²Œ ì‹¤í–‰í•©ë‹ˆë‹¤.
```bash
./gradlew bootRun
```

**2. Using Docker**  
`docker-compose.yml` (ìƒì„± í•„ìš”) ë˜ëŠ” `docker-run.sh` ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ PostgreSQLê³¼ í•¨ê»˜ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
# 1. Docker ì´ë¯¸ì§€ ë¹Œë“œ
./docker/docker-build.sh

# 2. Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰
./docker/docker-run.sh
```

---

## ğŸ§ª Testing

í”„ë¡œì íŠ¸ëŠ” ë‘ ê°€ì§€ ìœ í˜•ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì•ˆì •ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.

1.  **Domain Test**: ìˆœìˆ˜ Java ì½”ë“œë¡œ Entityì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê²€ì¦í•©ë‹ˆë‹¤. (Spring, DB ì˜ì¡´ì„± ì—†ìŒ)
2.  **Integration Test**: `@SpringBootTest`ë¥¼ ì‚¬ìš©í•˜ì—¬ Serviceë¶€í„° Repository, ì‹¤ì œ DB(H2)ê¹Œì§€ ì´ì–´ì§€ëŠ” ì „ì²´ íë¦„ì„ í†µí•© ê²€ì¦í•©ë‹ˆë‹¤. ëª¨ë“  í…ŒìŠ¤íŠ¸ëŠ” `@Transactional`ì„ í†µí•´ ê²©ë¦¬ë©ë‹ˆë‹¤.

### Run Tests
```bash
./gradlew test
```

---

## ğŸ’¡ Additional Information

### Configuration Profiles
ì´ í”„ë¡œì íŠ¸ëŠ” Spring Profileì„ í†µí•´ í™˜ê²½ë³„ ì„¤ì •ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤.
- **`local`**: ê°œë°œ í™˜ê²½ìš© í”„ë¡œí•„. H2 ì¸ë©”ëª¨ë¦¬ DBë¥¼ ì‚¬ìš©í•˜ê³ , S3 ëŒ€ì‹  ë¡œì»¬ì— íŒŒì¼ì„ ì—…ë¡œë“œí•˜ëŠ” `FakeImageUploader`ê°€ í™œì„±í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (`./gradlew bootRun`ì˜ ê¸°ë³¸ê°’)
- **`prod`**: ìš´ì˜ í™˜ê²½ìš© í”„ë¡œí•„. PostgreSQL DBì™€ ì‹¤ì œ AWS S3 ì—°ë™ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. Dockerë¡œ ì‹¤í–‰ ì‹œ ì´ í”„ë¡œí•„ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.

### Error Handling
APIì—ì„œ ì˜¤ë¥˜ ë°œìƒ ì‹œ, ë‹¤ìŒê³¼ ê°™ì€ ì¼ê´€ëœ í˜•ì‹ì˜ JSON ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.
```json
{
  "code": "ERROR_CODE",
  "message": "ì—ëŸ¬ì— ëŒ€í•œ ìƒì„¸ ë©”ì‹œì§€"
}
```
- **`code`**: ì—ëŸ¬ ìœ í˜•ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ ê³ ìœ  ì½”ë“œ (ì˜ˆ: `BAD_REQUEST`, `ENTITY_NOT_FOUND`)
- **`message`**: ê°œë°œì ë˜ëŠ” ì‚¬ìš©ìê°€ ë¬¸ì œë¥¼ íŒŒì•…í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ì„¤ëª… ë©”ì‹œì§€

---

## ğŸ”§ Environment Variables

`application.yml` ë˜ëŠ” `.env` íŒŒì¼ì„ í†µí•´ í™˜ê²½ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. API ì‹¤í–‰ì„ ìœ„í•´ ë‹¤ìŒ ë³€ìˆ˜ë“¤ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```yaml
# application-local.yml ì˜ˆì‹œ

# -- DB (PostgreSQL) --
# spring.datasource.url=jdbc:postgresql://localhost:5432/shoemoa
# spring.datasource.username=user
# spring.datasource.password=password

# -- AWS S3 & CloudFront --
# spring.cloud.aws.credentials.access-key=...
# spring.cloud.aws.credentials.secret-key=...
# spring.cloud.aws.s3.bucket=your-s3-bucket-name
# cloudfront.domain=your-cloudfront-domain.com
```
