# í”„ë¡œì íŠ¸ ë¬¸ì„œ ê°€ì´ë“œ

ë³¸ í”„ë¡œì íŠ¸ëŠ” **JPA ê¸°ë°˜ ì‹¤ë¬´ ì¹œí™”ì  êµ¬ì¡°**ë¥¼ í•™ìŠµí•˜ëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ìž…ë‹ˆë‹¤.

---

## ðŸŽ¯ í”„ë¡œì íŠ¸ í•œ ì¤„ ì •ì˜

> **"JPA Entityë¥¼ Domainìœ¼ë¡œ ì‚¬ìš©í•˜ë˜,  
> ServiceëŠ” ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ë§Œ í•˜ê³ ,  
> Aggregate ê°„ í˜‘ë ¥ì€ Portë¡œ í•œë‹¤."**

---

## ðŸ“š ë¬¸ì„œ ì½ëŠ” ìˆœì„œ

### 1ë‹¨ê³„: ë¹ ë¥¸ ì´í•´ (15ë¶„)
```
1. README.md (ì§€ê¸ˆ ë³´ê³  ìžˆëŠ” ë¬¸ì„œ) - 3ë¶„
   â†“
2. CORE.md (ì„¤ê³„ ì² í•™) - 5ë¶„
   â†“
3. Sample_code.md (ì „ì²´ ì½”ë“œ ì˜ˆì‹œ) - 7ë¶„
```

**ëª©í‘œ**: "ì•„, ì´ í”„ë¡œì íŠ¸ëŠ” ì´ëŸ° êµ¬ì¡°êµ¬ë‚˜" ê° ìž¡ê¸°

---

### 2ë‹¨ê³„: ì‹¤ë¬´ ìž‘ì„± ê°€ì´ë“œ (20ë¶„)
```
4. STRUCTURE.md (ì½”ë“œ ìž‘ì„± ê·œì¹™) - 15ë¶„
   â†“
5. QUICK_REFERENCE.md (ì²´í¬ë¦¬ìŠ¤íŠ¸) - 5ë¶„
```

**ëª©í‘œ**: ì‹¤ì œ ì½”ë“œ ìž‘ì„± ì‹œ ì°¸ê³ 

---

### 3ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ì „ëžµ (10ë¶„)
```
6. TESTING.md (í…ŒìŠ¤íŠ¸ ìž‘ì„± ë°©ë²•) - 10ë¶„
```

**ëª©í‘œ**: Domain/UseCase/Controller í…ŒìŠ¤íŠ¸ ì´í•´

---

## ðŸ“ ë¬¸ì„œ ì—­í•  ì„¤ëª…

### í•„ìˆ˜ ë¬¸ì„œ

| ë¬¸ì„œ | ì—­í•  | ì–¸ì œ ë³´ë‚˜? |
|------|------|----------|
| **README.md** | ë¬¸ì„œ ë„¤ë¹„ê²Œì´ì…˜ | ì²˜ìŒ ì‹œìž‘í•  ë•Œ |
| **CORE.md** | ì„¤ê³„ ì² í•™ + ì ˆëŒ€ ê·œì¹™ | ì„¤ê³„ ë…¼ì˜í•  ë•Œ |
| **STRUCTURE.md** | ì½”ë“œ ìž‘ì„± ê°€ì´ë“œ | ì½”ë“œ ìž‘ì„±í•  ë•Œ (ê°€ìž¥ ìžì£¼ ë´„) |
| **TESTING.md** | í…ŒìŠ¤íŠ¸ ì „ëžµ | í…ŒìŠ¤íŠ¸ ìž‘ì„±í•  ë•Œ |
| **QUICK_REFERENCE.md** | ì²´í¬ë¦¬ìŠ¤íŠ¸ + FAQ | PR ì „ / ë§‰íž ë•Œ |
| **Sample_code.md** | ì „ì²´ ì½”ë“œ ì˜ˆì‹œ | êµ¬ì¡° ì´í•´í•  ë•Œ |

### ë¶€ê°€ ë¬¸ì„œ

| ë¬¸ì„œ | ì—­í•  | ì–¸ì œ ë³´ë‚˜? |
|------|------|----------|
| **FEATURES.md** | ê¸°ëŠ¥ ë°±ë¡œê·¸ | í‹°ì¼“ ë¶„í•´í•  ë•Œ |

---

## ðŸ†˜ ìƒí™©ë³„ ë¬¸ì„œ ì°¾ê¸°

### "ì²˜ìŒ í”„ë¡œì íŠ¸ì— íˆ¬ìž…ëì–´ìš”"
1. README.md (ì§€ê¸ˆ ì´ ë¬¸ì„œ)
2. CORE.md
3. Sample_code.md
4. STRUCTURE.md

**ì´ 30ë¶„ì´ë©´ ì „ì²´ êµ¬ì¡° ì´í•´ ê°€ëŠ¥**

---

### "Entity ì–´ë–»ê²Œ ìž‘ì„±í•˜ì§€?"
â†’ **STRUCTURE.md** Â§ 3. Domain ìž‘ì„± ê·œì¹™

**í•µì‹¬ ì²´í¬**:
- [ ] Setter ì—†ìŒ
- [ ] ìƒì„±ìžëŠ” `protected`
- [ ] ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ ì‚¬ìš©
- [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨

---

### "Serviceì—ì„œ ë‹¤ë¥¸ ë„ë©”ì¸ ì ‘ê·¼í•˜ë ¤ë©´?"
â†’ **STRUCTURE.md** Â§ 5. Port ì„¤ê³„ ê°€ì´ë“œ

**í•µì‹¬**:
- âŒ ë‹¤ë¥¸ Repository ì§ì ‘ ì£¼ìž… ê¸ˆì§€
- âœ… Port ì¸í„°íŽ˜ì´ìŠ¤ ì‚¬ìš©
- Port ì¢…ë¥˜: Validator, Manager, Reader, Gateway

---

### "Serviceê°€ ë‹¤ë¥¸ Service ì£¼ìž…ë°›ì•„ë„ ë¼?"
â†’ **QUICK_REFERENCE.md** FAQ

**ë‹µ**: âŒ ì•ˆ ë©ë‹ˆë‹¤. Portë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

---

### "í…ŒìŠ¤íŠ¸ëŠ” ì–´ë–»ê²Œ ìž‘ì„±í•˜ì§€?"
â†’ **TESTING.md**

**ì „ëžµ**:
- Domain Test â†’ ìˆœìˆ˜ ìžë°” (JPA, Spring ì—†ìŒ)
- UseCase Test â†’ Fake Port ì‚¬ìš©
- Controller Test â†’ í†µí•© í…ŒìŠ¤íŠ¸

---

### "PR ì „ì— ë­˜ ì²´í¬í•´ì•¼ í•˜ì§€?"
â†’ **QUICK_REFERENCE.md** PR ì²´í¬ë¦¬ìŠ¤íŠ¸

**í•„ìˆ˜ ì²´í¬**:
- [ ] Entityì— Setter ì—†ìŒ
- [ ] Serviceì— if/else ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—†ìŒ
- [ ] Service â†’ Service ì£¼ìž… ì—†ìŒ
- [ ] Controllerì—ì„œ Entity ë°˜í™˜ ì•ˆ í•¨
- [ ] Port ì‚¬ìš© ì‹œ ë„¤ì´ë° ê·œì¹™ ì¤€ìˆ˜

---

### "ìš©ì–´ê°€ í—·ê°ˆë ¤ìš”"
â†’ **QUICK_REFERENCE.md** ìš©ì–´ ì°¸ì¡°

**ìžì£¼ í—·ê°ˆë¦¬ëŠ” ê²ƒ**:
- Port vs Repository
- Service vs Domain Service
- UseCase vs Application Service
- Aggregate vs Entity

---

## ðŸ—ï¸ í”„ë¡œì íŠ¸ í•µì‹¬ êµ¬ì¡°

### ë ˆì´ì–´ ì±…ìž„
```
Controller
  - HTTP ìš”ì²­/ì‘ë‹µë§Œ ì²˜ë¦¬
  - DTO ë³€í™˜
  
    â†“

Application Service (UseCase)
  - ìœ ì¦ˆì¼€ì´ìŠ¤ íë¦„ ì¡°í•©
  - íŠ¸ëžœìž­ì…˜ ê²½ê³„
  - Port í˜¸ì¶œ
  
    â†“

Domain (JPA Entity)
  - ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™
  - ìƒíƒœ ë³€ê²½ ë¡œì§
  
    â†“

Repository
  - ì €ìž¥/ì¡°íšŒë§Œ
```

---

### Aggregate ê°„ í˜‘ë ¥
```
OrderService
  |
  |-- OrderRepository (ì§ì ‘ ì£¼ìž… âœ…)
  |
  |-- MemberValidator (Port âœ…)
  |     â””â”€ JpaMemberValidator (Infrastructure)
  |           â””â”€ MemberRepository
  |
  |-- StockManager (Port âœ…)
        â””â”€ JpaStockManager (Infrastructure)
              â””â”€ ProductRepository
```

**í•µì‹¬**: 
- ìžê¸° Aggregate RepositoryëŠ” ì§ì ‘ ì£¼ìž…
- ë‹¤ë¥¸ AggregateëŠ” Port ì‚¬ìš©

---

## âš ï¸ ì ˆëŒ€ ê·œì¹™ (ìœ„ë°˜ ì‹œ ë¦¬ë·° ë°˜ë ¤)

### 1. Entity Setter ê¸ˆì§€
```java
// âŒ ê¸ˆì§€
order.setStatus(OrderStatus.CANCELLED);

// âœ… í—ˆìš©
order.cancel();
```

---

### 2. Service ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê¸ˆì§€
```java
// âŒ ê¸ˆì§€: Serviceì— if/else ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ê¸°
if (order.getTotalPrice() > 100_000) {
    order.setDiscount(10);
}

// âœ… í—ˆìš©: Domain ë©”ì„œë“œ í˜¸ì¶œ
order.applyDiscount();
```

---

### 3. Service â†’ Service ì£¼ìž… ê¸ˆì§€
```java
// âŒ ê¸ˆì§€
@Service
public class OrderService {
    private final ProductService productService;
}

// âœ… í—ˆìš©
@Service
public class OrderService {
    private final StockManager stockManager;  // Port
}
```

---

### 4. ë‹¤ë¥¸ Aggregate Repository ì§ì ‘ ì£¼ìž… ê¸ˆì§€
```java
// âŒ ê¸ˆì§€
@Service
public class OrderService {
    private final OrderRepository orderRepository;
    private final MemberRepository memberRepository;  // ë‹¤ë¥¸ Aggregate
}

// âœ… í—ˆìš©
@Service
public class OrderService {
    private final OrderRepository orderRepository;
    private final MemberValidator memberValidator;  // Port
}
```

---

### 5. Controllerì—ì„œ Entity ë°˜í™˜ ê¸ˆì§€
```java
// âŒ ê¸ˆì§€
@GetMapping("/{id}")
public Order getOrder(@PathVariable Long id) {
    return orderService.getOrder(id);
}

// âœ… í—ˆìš©
@GetMapping("/{id}")
public OrderResponse getOrder(@PathVariable Long id) {
    Order order = orderService.getOrder(id);
    return OrderResponse.from(order);
}
```

---

## ðŸ§ª í…ŒìŠ¤íŠ¸ ì „ëžµ ìš”ì•½

### Domain Test (ìˆœìˆ˜ ìžë°”)
```java
@Test
void ì£¼ë¬¸_ì·¨ì†Œ_í…ŒìŠ¤íŠ¸() {
    Order order = Order.create(1L, 10L, 3);
    
    order.cancel();
    
    assertThat(order.getStatus()).isEqualTo(CANCELLED);
}
```

**íŠ¹ì§•**:
- Spring âŒ
- JPA âŒ
- Mock âŒ

---

### UseCase Test (Fake Port)
```java
@Test
void ë¹„í™œì„±_íšŒì›ì€_ì£¼ë¬¸_ë¶ˆê°€() {
    // given
    FakeMemberValidator validator = new FakeMemberValidator();
    validator.setActive(1L, false);
    
    OrderService service = new OrderService(..., validator, ...);
    
    // when & then
    assertThatThrownBy(() -> 
        service.createOrder(1L, 10L, 3)
    ).isInstanceOf(IllegalStateException.class);
}
```

**íŠ¹ì§•**:
- Spring âŒ
- Fake êµ¬í˜„ì²´ ì‚¬ìš© âœ…

---

### Controller í†µí•© í…ŒìŠ¤íŠ¸
```java
@SpringBootTest
@AutoConfigureMockMvc
class OrderControllerTest {
    
    @Test
    void ì£¼ë¬¸_ìƒì„±_API_í…ŒìŠ¤íŠ¸() throws Exception {
        mockMvc.perform(post("/api/orders")
            .content(...))
            .andExpect(status().isOk());
    }
}
```

**íŠ¹ì§•**:
- Spring âœ…
- ì „ì²´ íë¦„ ê²€ì¦

---

## ðŸ“¦ íŒ¨í‚¤ì§€ êµ¬ì¡° í•œëˆˆì— ë³´ê¸°
```
com.shop
â”œâ”€ domain
â”‚  â”œâ”€ order (Order, OrderRepository)
â”‚  â”œâ”€ member (Member, MemberRepository)
â”‚  â””â”€ product (Product, ProductRepository)
â”‚
â”œâ”€ application
â”‚  â””â”€ order
â”‚     â”œâ”€ OrderService.java
â”‚     â””â”€ port (MemberValidator, StockManager)
â”‚
â”œâ”€ infrastructure
â”‚  â”œâ”€ member (JpaMemberValidator)
â”‚  â””â”€ product (JpaStockManager)
â”‚
â””â”€ presentation
   â””â”€ order (OrderController, DTO)
```

---

## ðŸ”„ ë¬¸ì„œ ì—…ë°ì´íŠ¸ ê·œì¹™

### ë¬¸ì„œ ë³€ê²½ ì ˆì°¨

1. **CORE.md** ë³€ê²½
   - íŒ€ ì „ì²´ í•©ì˜ í•„ìš”
   - ADR ìž‘ì„±

2. **STRUCTURE.md** ë³€ê²½
   - ì½”ë“œ ë¦¬ë·°ì–´ 2ëª… ì´ìƒ ìŠ¹ì¸

3. **TESTING.md** ë³€ê²½
   - í…ŒìŠ¤íŠ¸ ì „ëžµ ë³€ê²½ ì‹œ ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì˜í–¥ ë¶„ì„

4. **QUICK_REFERENCE.md** ë³€ê²½
   - ìžìœ ë¡­ê²Œ ì—…ë°ì´íŠ¸ (FAQ ì¶”ê°€ ë“±)

---

## ðŸ’¡ í•™ìŠµ ëª©í‘œ

### ì´ í”„ë¡œì íŠ¸ë¥¼ ëë‚´ë©´

âœ… **JPA Entityë¥¼ Domainìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•** ì´í•´  
âœ… **Service ë¹„ëŒ€í™” ë°©ì§€** ë°©ë²• ì²´ë“  
âœ… **Portë¥¼ í†µí•œ Aggregate ê°„ í˜‘ë ¥** íŒ¨í„´ í•™ìŠµ  
âœ… **Mock ì—†ëŠ” í…ŒìŠ¤íŠ¸ ì „ëžµ** ê²½í—˜  
âœ… **ì‹¤ë¬´ ì¹œí™”ì  êµ¬ì¡°** ì„¤ê³„ ì—­ëŸ‰

---

## ðŸš« ì´ í”„ë¡œì íŠ¸ì—ì„œ í•˜ì§€ ì•ŠëŠ” ê²ƒ

âŒ ë„ë©”ì¸ ëª¨ë¸ê³¼ ì˜ì† ëª¨ë¸ ë¶„ë¦¬  
âŒ ê³¼ë„í•œ ì¶”ìƒí™” (Domain Service, Specification ë“±)  
âŒ CQRS, Event Sourcing  
âŒ ëª¨ë“  DDD íŒ¨í„´ ì ìš©  

**ì´ìœ **: í•™ìŠµ ëª©ì ìƒ í•µì‹¬ë§Œ ì§‘ì¤‘. ë³µìž¡ë„ ìµœì†Œí™”.

---

## ðŸŽ“ ì¶”ì²œ í•™ìŠµ ìˆœì„œ (ì‹ ê·œ íŒ€ì›ìš©)

### Day 1: êµ¬ì¡° ì´í•´
1. README.md ì½ê¸° (ì´ ë¬¸ì„œ)
2. CORE.md ì½ê¸°
3. Sample_code.md ë³´ë©´ì„œ ì½”ë“œ ë”°ë¼ì¹˜ê¸°

### Day 2: ê·œì¹™ ìˆ™ì§€
4. STRUCTURE.md ì •ë…
5. QUICK_REFERENCE.md ì²´í¬ë¦¬ìŠ¤íŠ¸ í™•ì¸
6. ê¸°ì¡´ ì½”ë“œ ë¦¬ë·° ë³´ê¸°

### Day 3: í…ŒìŠ¤íŠ¸ ìž‘ì„±
7. TESTING.md ì½ê¸°
8. Domain Test ìž‘ì„± ì‹¤ìŠµ
9. UseCase Test ìž‘ì„± ì‹¤ìŠµ

### Day 4~: ì‹¤ì „
10. FEATURES.mdì—ì„œ í‹°ì¼“ ì„ íƒ
11. ì½”ë“œ ìž‘ì„±
12. PR ì „ QUICK_REFERENCE ì²´í¬

---

## ðŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### ì½”ë“œ ìž‘ì„± ì „

1. STRUCTURE.md í™•ì¸
2. ë¹„ìŠ·í•œ ê¸°ëŠ¥ ì½”ë“œ ì°¸ê³ 
3. ëª¨ë¥´ë©´ ì§ˆë¬¸ (ë¬¸ì„œ ì´ìŠˆ ë“±ë¡)

### PR ì „

1. QUICK_REFERENCE.md ì²´í¬ë¦¬ìŠ¤íŠ¸ í™•ì¸
2. í…ŒìŠ¤íŠ¸ ìž‘ì„± ì™„ë£Œ
3. ë¬¸ì„œ ì—…ë°ì´íŠ¸ í•„ìš” ì‹œ í•¨ê»˜ ìˆ˜ì •

### ë¦¬ë·° ì‹œ

1. CORE.md ê·œì¹™ ìœ„ë°˜ í™•ì¸
2. STRUCTURE.md ê°€ì´ë“œ ì¤€ìˆ˜ í™•ì¸
3. í…ŒìŠ¤íŠ¸ ì „ëžµ ì¼ì¹˜ í™•ì¸

---

## ðŸ“ž ë¬¸ì˜

### ë§‰íž ë•Œ

1. **QUICK_REFERENCE.md** FAQ ë¨¼ì € í™•ì¸
2. íŒ€ ì±„ë„ì— ì§ˆë¬¸
3. ë¬¸ì„œ ì´ìŠˆ ë“±ë¡ (ë¬¸ì„œ ê°œì„  ì œì•ˆ)

### ë¬¸ì„œ ê°œì„ 

- ì½ë‹¤ê°€ ì´í•´ ì•ˆ ë˜ëŠ” ë¶€ë¶„ ë°œê²¬ ì‹œ ì´ìŠˆ ë“±ë¡
- ì˜ˆì‹œ ë¶€ì¡±í•˜ë©´ ì˜ˆì‹œ ì¶”ê°€ ìš”ì²­
- 1ë…„ì°¨ ê´€ì ì—ì„œ ì–´ë ¤ìš´ ë¶€ë¶„ í”¼ë“œë°±

---

## í•œ ì¤„ ìš”ì•½

> **"ë¬¸ì„œ ì½ëŠ” ì‹œê°„: ì´ 45ë¶„.  
> ì½”ë“œ ìž‘ì„± ì „ STRUCTURE.md,  
> PR ì „ QUICK_REFERENCE.md í•„ìˆ˜."**

---