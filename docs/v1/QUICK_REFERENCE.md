# QUICK_REFERENCE.md

## ë¹ ë¥¸ ì°¸ì¡° ê°€ì´ë“œ

**ì´ ë¬¸ì„œëŠ” ì½”ë“œ ì‘ì„± ì¤‘ ë¹ ë¥´ê²Œ í™•ì¸í•˜ëŠ” ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ FAQì…ë‹ˆë‹¤.**

---

## ğŸ“‹ PR ì „ í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Entity ê´€ë ¨
```
[ ] [Entityì— public Setterê°€ ì—†ëŠ”ê°€?](STRUCTURE.md#32-setter-ê¸ˆì§€)
[ ] [ê¸°ë³¸ ìƒì„±ìê°€ protectedì¸ê°€?](STRUCTURE.md#33-ìƒì„±ì-ê·œì¹™)
[ ] [ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ Entity ë©”ì„œë“œë¡œ êµ¬í˜„ë˜ì—ˆëŠ”ê°€?](CORE.md#1-ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§ì€-entity-ë©”ì„œë“œì—)
[ ] [ë‹¤ë¥¸ Aggregate Entityë¥¼ í•„ë“œë¡œ ì°¸ì¡°í•˜ì§€ ì•ŠëŠ”ê°€?](STRUCTURE.md#34-aggregate-ê°„-ê´€ê³„-ê·œì¹™)
[ ] [ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ ë˜ëŠ” ëª…ì‹œì  ìƒì„±ìë¥¼ ì‚¬ìš©í–ˆëŠ”ê°€?](STRUCTURE.md#33-ìƒì„±ì-ê·œì¹™)
```

---

### Service ê´€ë ¨
```
[ ] [Serviceì— if/else ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ê¸°ê°€ ì—†ëŠ”ê°€?](CORE.md#2-serviceëŠ”-ifelse-ê¸ˆì§€)
[ ] [Serviceê°€ ë‹¤ë¥¸ Serviceë¥¼ ì£¼ì…ë°›ì§€ ì•ŠëŠ”ê°€?](STRUCTURE.md#42-service-ê¸ˆì§€-ì‚¬í•­)
[ ] [ë‹¤ë¥¸ Aggregate Repositoryë¥¼ ì§ì ‘ ì£¼ì…ë°›ì§€ ì•ŠëŠ”ê°€?](STRUCTURE.md#44-repository-ì‚¬ìš©-ê·œì¹™)
[ ] [Port ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆëŠ”ê°€?](STRUCTURE.md#5-port-ì„¤ê³„-ê°€ì´ë“œ-í•µì‹¬)
[ ] [@Transactionalì´ Service ë©”ì„œë“œì— ìˆëŠ”ê°€?](STRUCTURE.md#57-íŠ¸ëœì­ì…˜-ê²½ê³„)
```

---

### Port ê´€ë ¨
```
[ ] [Port ì´ë¦„ì´ ì—­í• ì„ ëª…í™•íˆ í‘œí˜„í•˜ëŠ”ê°€?](STRUCTURE.md#53-port-ë¶„ë¥˜-ë°-ë„¤ì´ë°)
[ ] [Portê°€ Entityë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠëŠ”ê°€?](STRUCTURE.md#54-port-ì„¤ê³„-ì›ì¹™)
[ ] [Port êµ¬í˜„ì²´ê°€ Infrastructure íŒ¨í‚¤ì§€ì— ìˆëŠ”ê°€?](STRUCTURE.md#1-íŒ¨í‚¤ì§€-êµ¬ì¡°)
[ ] [Port ì¸í„°í˜ì´ìŠ¤ê°€ application/port íŒ¨í‚¤ì§€ì— ìˆëŠ”ê°€?](STRUCTURE.md#1-íŒ¨í‚¤ì§€-êµ¬ì¡°)
```

---

### Controller ê´€ë ¨
```
[ ] [Controllerì—ì„œ Entityë¥¼ ì§ì ‘ ë°˜í™˜í•˜ì§€ ì•ŠëŠ”ê°€?](CORE.md#4-controllerì—ì„œ-entity-ë°˜í™˜)
[ ] [Request/Response DTOë¥¼ ì‚¬ìš©í–ˆëŠ”ê°€?](Sample_code.md#41-request-dto)
[ ] [Controllerì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì—†ëŠ”ê°€?](CORE.md#--ë ˆì´ì–´-ì±…ì„)
```

---

### í…ŒìŠ¤íŠ¸ ê´€ë ¨
```
[ ] [Domain TestëŠ” ìˆœìˆ˜ ìë°”ë¡œ ì‘ì„±í–ˆëŠ”ê°€?](TESTING.md#2-domain-test-ìˆœìˆ˜-ìë°”)
[ ] [UseCase TestëŠ” Fake Portë¥¼ ì‚¬ìš©í–ˆëŠ”ê°€?](TESTING.md#3-usecase-test-fake-port)
[ ] [Controller TestëŠ” @SpringBootTestë¡œ ì‘ì„±í–ˆëŠ”ê°€?](TESTING.md#4-controller-í†µí•©-í…ŒìŠ¤íŠ¸)
[ ] [í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì— ëŒ€í•œ Domain Testê°€ ìˆëŠ”ê°€?](TESTING.md#7-í…ŒìŠ¤íŠ¸-ì»¤ë²„ë¦¬ì§€-ëª©í‘œ)
```

---

## â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)

### Q1. Serviceì—ì„œ ë‹¤ë¥¸ ë„ë©”ì¸ Repositoryë¥¼ ì£¼ì…ë°›ì•„ë„ ë˜ë‚˜ìš”?

**A. âŒ ì•ˆ ë©ë‹ˆë‹¤. [Portë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.](STRUCTURE.md#5-port-ì„¤ê³„-ê°€ì´ë“œ-í•µì‹¬)**
```java
// âŒ ê¸ˆì§€
@Service
public class OrderService {
    private final OrderRepository orderRepository;
    private final MemberRepository memberRepository;  // ë‹¤ë¥¸ Aggregate
}

// âœ… í—ˆìš©
@Service
public class OrderService {
    private final OrderRepository orderRepository;
    private final MemberValidator memberValidator;  // Port
}
```

**ì´ìœ **:
- Aggregate ê²½ê³„ íŒŒê´´ ([CORE.md](CORE.md#3-aggregate-ê°„-ì§ì ‘-ì°¸ì¡°-ê¸ˆì§€))
- ê²°í•©ë„ ì¦ê°€
- í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€ ([TESTING.md](TESTING.md#3-usecase-test-fake-port))

---

### Q2. Serviceê°€ ë‹¤ë¥¸ Serviceë¥¼ ì£¼ì…ë°›ì•„ë„ ë˜ë‚˜ìš”?

**A. âŒ ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤. [Portë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.](STRUCTURE.md#5-port-ì„¤ê³„-ê°€ì´ë“œ-í•µì‹¬)**
```java
// âŒ ê¸ˆì§€
@Service
public class OrderService {
    private final ProductService productService;  // Service ì£¼ì… ê¸ˆì§€
}

// âœ… í—ˆìš©
@Service
public class OrderService {
    private final StockManager stockManager;  // Port ì‚¬ìš©
}
```

**ì´ìœ **:
- ìˆœí™˜ ì°¸ì¡° ìœ„í—˜
- íŠ¸ëœì­ì…˜ ê²½ê³„ ì• ë§¤ ([STRUCTURE.md](STRUCTURE.md#57-íŠ¸ëœì­ì…˜-ê²½ê³„))
- Service ê³„ì¸µ ë¹„ëŒ€í™”

---

### Q3. PortëŠ” ì–¸ì œ ë§Œë“œë‚˜ìš”?

**A. [ë‹¤ìŒ ê²½ìš°ì—ë§Œ ë§Œë“­ë‹ˆë‹¤:](STRUCTURE.md#52-portê°€-í•„ìš”í•œ-ê²½ìš°)**

1. **ë‹¤ë¥¸ Aggregate ìƒíƒœ ê²€ì¦**
```java
   public interface MemberValidator {
       void validateActive(Long memberId);
   }
```

2. **ë‹¤ë¥¸ Aggregate ìƒíƒœ ë³€ê²½**
```java
   public interface StockManager {
       void decrease(Long productId, int quantity);
   }
```

3. **ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™**
```java
   public interface PaymentGateway {
       PaymentResult pay(PaymentRequest request);
   }
```

**ë§Œë“¤ì§€ ì•ŠëŠ” ê²½ìš°**:
- ë‹¨ìˆœ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ (existsById)
- ìê¸° Aggregate ë‚´ë¶€ ë¡œì§

---

### Q4. Entityì— Setterë¥¼ ê¼­ ì•ˆ ì¨ì•¼ í•˜ë‚˜ìš”?

**A. âœ… ë„¤, [ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤.](STRUCTURE.md#32-setter-ê¸ˆì§€)**
```java
// âŒ ê¸ˆì§€
public class Order {
    public void setStatus(OrderStatus status) {
        this.status = status;
    }
}

// âœ… í—ˆìš©
public class Order {
    public void cancel() {
        if (this.status != OrderStatus.CREATED) {
            throw new IllegalStateException("ì·¨ì†Œí•  ìˆ˜ ì—†ëŠ” ìƒíƒœ");
        }
        this.status = OrderStatus.CANCELLED;
    }
}
```

**ì´ìœ **:
- ë¬´ë¶„ë³„í•œ ìƒíƒœ ë³€ê²½ ë°©ì§€
- ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ëª…í™•í™”
- ë¶ˆë³€ ì¡°ê±´ ìœ ì§€

---

### Q5. Controllerì—ì„œ Entityë¥¼ ë°˜í™˜í•˜ë©´ ì•ˆ ë˜ë‚˜ìš”?

**A. âŒ ì•ˆ ë©ë‹ˆë‹¤. [DTOë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.](STRUCTURE.md#24-presentation-layer-controller)**
```java
// âŒ ê¸ˆì§€
@GetMapping("/{id}")
public Order getOrder(@PathVariable Long id) {
    return orderService.getOrder(id);
}

// âœ… í—ˆìš©
@GetMapping("/{id}")
public OrderResponse getOrder(@PathVariable Long id) {
    Order order = orderService.getOrder(id);
    return OrderResponse.from(order);
}
```

**ì´ìœ **:
- Entity ë‚´ë¶€ êµ¬ì¡° ë…¸ì¶œ
- ì§€ì—° ë¡œë”© ë¬¸ì œ (N+1)
- JSON ìˆœí™˜ ì°¸ì¡°

---

### Q6. Portê°€ Entityë¥¼ ë°˜í™˜í•´ë„ ë˜ë‚˜ìš”?

**A. âŒ ì•ˆ ë©ë‹ˆë‹¤. [DTO ë˜ëŠ” ì›ì‹œê°’ë§Œ ë°˜í™˜í•˜ì„¸ìš”.](STRUCTURE.md#54-port-ì„¤ê³„-ì›ì¹™)**
```java
// âŒ ê¸ˆì§€
public interface ProductReader {
    Product findById(Long id);  // Entity ë°˜í™˜
}

// âœ… í—ˆìš©
public interface ProductReader {
    ProductInfo getInfo(Long id);  // DTO ë°˜í™˜
    boolean hasStock(Long productId, int quantity);  // ì›ì‹œê°’
}
```

**ì´ìœ **:
- Aggregate ê²½ê³„ ìœ ì§€
- EntityëŠ” ìê¸° Aggregate ë‚´ì—ì„œë§Œ ì¡´ì¬

---

### Q7. Port êµ¬í˜„ì²´ì— @Transactionalì„ ë¶™ì—¬ì•¼ í•˜ë‚˜ìš”?

**A. âŒ ì•ˆ ë©ë‹ˆë‹¤. [Serviceì—ë§Œ ë¶™ì…ë‹ˆë‹¤.](STRUCTURE.md#57-íŠ¸ëœì­ì…˜-ê²½ê³„)**
```java
// Service: @Transactional ìˆìŒ
@Service
public class OrderService {
    @Transactional  // â† ì—¬ê¸°
    public Long createOrder(...) {
        stockManager.decrease(...);
        orderRepository.save(...);
    }
}

// Port êµ¬í˜„ì²´: @Transactional ì—†ìŒ
@Component
public class JpaStockManager implements StockManager {
    @Override  // @Transactional ì—†ìŒ
    public void decrease(Long productId, int quantity) {
        // ...
    }
}
```

**ì´ìœ **: Serviceì˜ @Transactionalì´ Port êµ¬í˜„ì²´ê¹Œì§€ ì „íŒŒë¨

---

### Q8. Domain Testì—ì„œ Springì„ ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ë‚˜ìš”?

**A. âœ… ë„¤, [ìˆœìˆ˜ ìë°”ë¡œë§Œ ì‘ì„±í•©ë‹ˆë‹¤.](TESTING.md#2-domain-test-ìˆœìˆ˜-ìë°”)**
```java
// âœ… í—ˆìš©: ìˆœìˆ˜ ìë°”
@Test
void ì£¼ë¬¸_ì·¨ì†Œ_í…ŒìŠ¤íŠ¸() {
    Order order = Order.create(1L, 10L, 3);
    
    order.cancel();
    
    assertThat(order.getStatus()).isEqualTo(CANCELLED);
}

// âŒ ê¸ˆì§€: Spring ì‚¬ìš©
@SpringBootTest
class OrderTest {
    @Autowired
    OrderRepository orderRepository;  // Domain Testì—ì„œ ê¸ˆì§€
}
```

**ì´ìœ **:
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ê¸°ìˆ ê³¼ ë¬´ê´€
- ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- Mock ë¶ˆí•„ìš”

---

### Q9. UseCase ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ê¼­ ë§Œë“¤ì–´ì•¼ í•˜ë‚˜ìš”?

**A. âœ… ë„¤, [Portë¥¼ ì‚¬ìš©í•œë‹¤ë©´ í•„ìˆ˜ì…ë‹ˆë‹¤.](TESTING.md#3-usecase-test-fake-port)**
```java
class OrderServiceTest {
    
    private FakeMemberValidator memberValidator;
    private FakeStockManager stockManager;
    private InMemoryOrderRepository orderRepository;
    private OrderService orderService;
    
    @BeforeEach
    void setUp() {
        memberValidator = new FakeMemberValidator();
        stockManager = new FakeStockManager();
        orderRepository = new InMemoryOrderRepository();
        
        orderService = new OrderService(
            memberValidator,
            stockManager,
            orderRepository
        );
    }
    
    @Test
    void ì¬ê³ _ë¶€ì¡±_ì‹œ_ì£¼ë¬¸_ì‹¤íŒ¨() {
        stockManager.setStock(1L, 2);
        
        assertThatThrownBy(() ->
            orderService.createOrder(1L, 1L, 3)
        ).isInstanceOf(IllegalStateException.class);
    }
}
```

**ì´ìœ **: Port ì‚¬ìš©ì˜ í•µì‹¬ ê°€ì¹˜ëŠ” Fakeë¡œ UseCase í…ŒìŠ¤íŠ¸

---

### Q10. ë‹¤ë¥¸ Aggregateë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ëŠ”ë° ì–´ë–»ê²Œ í•˜ë‚˜ìš”?

**A. [Portì˜ Managerë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.](STRUCTURE.md#53-port-ë¶„ë¥˜-ë°-ë„¤ì´ë°)**
```java
// Port ì •ì˜
public interface StockManager {
    void decrease(Long productId, int quantity);
}

// Port êµ¬í˜„
@Component
public class JpaStockManager implements StockManager {
    private final ProductRepository productRepository;
    
    @Override
    public void decrease(Long productId, int quantity) {
        Product product = productRepository.findById(productId)
            .orElseThrow();
        product.decreaseStock(quantity);  // Domain ë©”ì„œë“œ í˜¸ì¶œ
        productRepository.save(product);
    }
}

// Serviceì—ì„œ ì‚¬ìš©
@Service
public class OrderService {
    private final StockManager stockManager;
    
    @Transactional
    public Long createOrder(...) {
        stockManager.decrease(productId, quantity);
        // ...
    }
}
```

---

## ğŸ¯ ìš©ì–´ ë¹ ë¥¸ ì°¸ì¡°

### Port vs Repository

| êµ¬ë¶„ | Port | Repository |
|------|------|------------|
| ìœ„ì¹˜ | application/port | domain |
| ì—­í•  | Aggregate ê°„ í˜‘ë ¥ ì¶”ìƒí™” | Aggregate ì˜ì†ì„± |
| êµ¬í˜„ ìœ„ì¹˜ | infrastructure | infrastructure |
| ì˜ˆì‹œ | MemberValidator | OrderRepository |

---

### Service vs Domain Service

| êµ¬ë¶„ | Application Service | Domain Service |
|------|---------------------|----------------|
| ìœ„ì¹˜ | application | domain |
| ì—­í•  | ìœ ì¦ˆì¼€ì´ìŠ¤ íë¦„ ì œì–´ | ì—¬ëŸ¬ Entity ê°„ ë¡œì§ |
| íŠ¸ëœì­ì…˜ | âœ… ìˆìŒ | âŒ ì—†ìŒ |
| ìš°ë¦¬ í”„ë¡œì íŠ¸ | âœ… ì‚¬ìš© | âŒ ì‚¬ìš© ì•ˆ í•¨ |

**ì°¸ê³ **: ì´ í”„ë¡œì íŠ¸ëŠ” Domain Serviceë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

### UseCase vs Application Service

**ê°™ì€ ì˜ë¯¸ì…ë‹ˆë‹¤.**

- UseCase: ê°œë…ì  í‘œí˜„
- Application Service: ì‹¤ì œ êµ¬í˜„ í´ë˜ìŠ¤ëª…
```java
// "ì£¼ë¬¸ ìƒì„±" UseCase
@Service
public class OrderService {  // Application Service
    public Long createOrder(...) {  // UseCase ë©”ì„œë“œ
        // ...
    }
}
```

---

### Aggregate vs Entity

| êµ¬ë¶„ | Aggregate | Entity |
|------|-----------|--------|
| ì˜ë¯¸ | ì¼ê´€ì„± ê²½ê³„ë¥¼ ê°€ì§„ ë¬¶ìŒ | ì‹ë³„ìë¥¼ ê°€ì§„ ê°ì²´ |
| ì˜ˆì‹œ | Order (Root) + OrderItem | Order, OrderItem ê°ê° |
| ì ‘ê·¼ | Rootë¥¼ í†µí•´ì„œë§Œ | - |

**í•µì‹¬**: 
- Aggregate Root = ì™¸ë¶€ ì ‘ê·¼ ì§„ì…ì 
- ë‚´ë¶€ EntityëŠ” ì§ì ‘ ì ‘ê·¼ ê¸ˆì§€

---

## ğŸ” ì½”ë“œ íŒ¨í„´ ë¹ ë¥¸ ì°¸ì¡°

### [Entity ìƒì„± íŒ¨í„´](Sample_code.md#11-order-entity-aggregate-root)
```java
@Entity
public class Order {
    
    @Id @GeneratedValue
    private Long id;
    
    private Long memberId;
    private int quantity;
    
    @Enumerated(EnumType.STRING)
    private OrderStatus status;
    
    // JPAìš© ê¸°ë³¸ ìƒì„±ì
    protected Order() {}
    
    // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ
    public static Order create(Long memberId, int quantity) {
        return new Order(memberId, quantity);
    }
    
    // private ìƒì„±ì
    private Order(Long memberId, int quantity) {
        validate(quantity);
        this.memberId = memberId;
        this.quantity = quantity;
        this.status = OrderStatus.CREATED;
    }
    
    private void validate(int quantity) {
        if (quantity <= 0) {
            throw new IllegalArgumentException("ìˆ˜ëŸ‰ì€ 1 ì´ìƒ");
        }
    }
    
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì„œë“œ
    public void cancel() {
        if (this.status != OrderStatus.CREATED) {
            throw new IllegalStateException("ì·¨ì†Œ ë¶ˆê°€");
        }
        this.status = OrderStatus.CANCELLED;
    }
    
    // getterë§Œ ë…¸ì¶œ
    public Long getId() { return id; }
    public OrderStatus getStatus() { return status; }
}
```

---

### [Port ì •ì˜ íŒ¨í„´](Sample_code.md#21-port-interfaces)
```java
// Application Layer
package com.shop.application.order.port;

public interface MemberValidator {
    void validateActive(Long memberId);
}

// Infrastructure Layer
package com.shop.infrastructure.member;

@Component
public class JpaMemberValidator implements MemberValidator {
    
    private final MemberRepository memberRepository;
    
    public JpaMemberValidator(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
    
    @Override
    public void validateActive(Long memberId) {
        Member member = memberRepository.findById(memberId)
            .orElseThrow(() -> new EntityNotFoundException());
        
        if (!member.isActive()) {
            throw new IllegalStateException("ë¹„í™œì„± íšŒì›");
        }
    }
}
```

---

### [Service ì‘ì„± íŒ¨í„´](Sample_code.md#22-orderservice-application-service)
```java
@Service
public class OrderService {
    
    // ìê¸° Aggregate Repository
    private final OrderRepository orderRepository;
    
    // Port ì¸í„°í˜ì´ìŠ¤
    private final MemberValidator memberValidator;
    private final StockManager stockManager;
    
    public OrderService(
        OrderRepository orderRepository,
        MemberValidator memberValidator,
        StockManager stockManager
    ) {
        this.orderRepository = orderRepository;
        this.memberValidator = memberValidator;
        this.stockManager = stockManager;
    }
    
    @Transactional
    public Long createOrder(Long memberId, Long productId, int quantity) {
        // 1. Portë¥¼ í†µí•œ ê²€ì¦
        memberValidator.validateActive(memberId);
        
        // 2. Portë¥¼ í†µí•œ ìƒíƒœ ë³€ê²½
        stockManager.decrease(productId, quantity);
        
        // 3. Domain ìƒì„±
        Order order = Order.create(memberId, productId, quantity);
        
        // 4. ì €ì¥
        return orderRepository.save(order).getId();
    }
}
```

---

### [Fake Port ì‘ì„± íŒ¨í„´](Sample_code.md#52-fake-port-êµ¬í˜„ì²´)
```java
class FakeMemberValidator implements MemberValidator {
    
    private Map<Long, Boolean> activeStatus = new HashMap<>();
    
    public void setActive(Long memberId, boolean active) {
        activeStatus.put(memberId, active);
    }
    
    @Override
    public void validateActive(Long memberId) {
        if (!activeStatus.getOrDefault(memberId, true)) {
            throw new IllegalStateException("ë¹„í™œì„± íšŒì›");
        }
    }
}
```

---

## ğŸš¨ í”í•œ ì‹¤ìˆ˜

### ì‹¤ìˆ˜ 1: Serviceì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
```java
// âŒ ì˜ëª»ëœ ì˜ˆ
@Service
public class OrderService {
    public void createOrder(...) {
        if (quantity > 10) {  // ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™
            throw new IllegalArgumentException("10ê°œ ì´í•˜ë§Œ ê°€ëŠ¥");
        }
    }
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ
@Entity
public class Order {
    private Order(int quantity) {
        if (quantity > 10) {  // Domainì´ ê·œì¹™ ì†Œìœ 
            throw new IllegalArgumentException("10ê°œ ì´í•˜ë§Œ ê°€ëŠ¥");
        }
    }
}
```

---

### ì‹¤ìˆ˜ 2: Portê°€ Entity ë°˜í™˜
```java
// âŒ ì˜ëª»ëœ ì˜ˆ
public interface ProductPort {
    Product findById(Long id);
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ
public interface ProductValidator {
    void validateAvailable(Long productId);
}
```

---

### ì‹¤ìˆ˜ 3: Controllerê°€ Entity ë°˜í™˜
```java
// âŒ ì˜ëª»ëœ ì˜ˆ
@GetMapping("/{id}")
public Order get(@PathVariable Long id) {
    return orderService.get(id);
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ
@GetMapping("/{id}")
public OrderResponse get(@PathVariable Long id) {
    Order order = orderService.get(id);
    return OrderResponse.from(order);
}
```

---

## ğŸ“Œ Port ë„¤ì´ë° ì²´í¬

| ì—­í•  | ë„¤ì´ë° | ì˜ˆì‹œ | ë©”ì„œë“œ ì˜ˆì‹œ |
|------|--------|------|------------|
| ê²€ì¦ | ~Validator | MemberValidator | validateActive(Long id) |
| ìƒíƒœ ë³€ê²½ | ~Manager | StockManager | decrease(Long id, int qty) |
| ì¡°íšŒ | ~Reader | ProductReader | getInfo(Long id) |
| ì™¸ë¶€ ì—°ë™ | ~Gateway | PaymentGateway | pay(PaymentRequest req) |

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸ ìš”ì•½ (ì•”ê¸°ìš©)
```
Entity:
- [ ] Setter ì—†ìŒ
- [ ] protected ê¸°ë³¸ ìƒì„±ì
- [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì„œë“œ ìˆìŒ

Service:
- [ ] if/else ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ê¸° ì—†ìŒ
- [ ] Service ì£¼ì… ì—†ìŒ
- [ ] ë‹¤ë¥¸ Repo ì£¼ì… ì—†ìŒ
- [ ] Port ì‚¬ìš©

Port:
- [ ] ë„¤ì´ë° ê·œì¹™ ì¤€ìˆ˜
- [ ] Entity ë°˜í™˜ ì•ˆ í•¨
- [ ] Infrastructureì— êµ¬í˜„ì²´

Test:
- [ ] Domainì€ ìˆœìˆ˜ ìë°”
- [ ] UseCaseëŠ” Fake Port
- [ ] ControllerëŠ” í†µí•©
```

---

## í•œ ì¤„ ìš”ì•½

> **"ë§‰íˆë©´ ì´ ë¬¸ì„œ ì°¾ê¸°.  
> PR ì „ì—” ì²´í¬ë¦¬ìŠ¤íŠ¸ í™•ì¸.  
> FAQ 3ë²ˆ ì´ìƒ ì½ê¸°."**

---